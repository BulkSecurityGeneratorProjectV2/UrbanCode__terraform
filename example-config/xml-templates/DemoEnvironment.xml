
<context xmlns="file:///home/kensie/.uProvisoin/mappers/">
  <environment name="TomcatDemoEnv">
    <vpc cidr="10.15.0.0/16">
      <subnet name="only" zone="us-east-1d" cidr="10.15.5.0/24"/>
      <inet-gwy name="gateway"/>
      <route-table subnet-name="only"  default="true"/>
      <vpc-security-group name="UDServer" description="The security group for the uDeploy server">
        <rule source="10.15.5.0/24" protocol="tcp" start-port="7918" end-port="7918" inbound="true"/>
        <rule source="10.15.5.0/24" protocol="http" start-port="8080" end-port="8080" inbound="true"/>
      </vpc-sercurity-group>
      <vpc-security-group name="UDAgent" description="The security group for the uDeploy agents">
      </vpc-sercurity-group>
    </vpc>

    <instance name="UAT" ami-id="ami-1434352" subnet-name="only" elastic-ip="true" private-key-ref="web-portal" image-size="M1Small">
      <security-group-ref security-group-name="UDServer"/>
      <security-group-ref security-group-name="UDAgent"/>
      <post-create-actions shell="/bin/bash">
        <script url="getFromS3">
          <param value="${Server.ip}"/>
        </script>
      </post-create-actions>
    </instance>

    <instance name="PROD" ami-id="ami-5434352" subnet-name="only" elastic-ip="true" private-key-ref="web-portal" image-size="M1Small">
      <security-group-ref security-group-name="UDAgent"/>
      <post-create-actions shell="/bin/bash">
        <script url="getFromS3">
          <param value="${Server.ip}"/>
        </script>
      </post-create-actions>
    </instance>
  </environment>
</context>


